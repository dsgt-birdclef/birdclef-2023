steps:
  - name: "gcr.io/cloud-builders/git"
    entrypoint: "bash"
    args:
      - -c
      - |
        git submodule init
        git submodule update
  - name: "gcr.io/cloud-builders/docker"
    args: ["compose", "-f", "docker/docker-compose.birdnet.yml", "pull"]
  - name: "gcr.io/cloud-builders/docker"
    args: ["compose", "-f", "docker/docker-compose.birdnet.yml", "build"]
images:
  - "${_REGION}-docker.pkg.dev/$PROJECT_ID/$REPO_NAME/birdnet:latest"
options:
  logging: CLOUD_LOGGING_ONLY
